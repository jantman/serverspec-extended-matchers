require 'spec_helper'
require 'serverspec_extended_types/http_get'

describe 'http_get()' do
  context 'Serverspec::Type method' do
    it 'instantiates the class with the correct parameters' do
      expect(Serverspec::Type::Http_Get).to receive(:new).with(1, 'hostheader', 'mypath', timeout_sec=20)
      http_get(1, 'hostheader', 'mypath', timeout_sec=20)
    end
    it 'returns the new object' do
      expect(Serverspec::Type::Http_Get).to receive(:new).and_return("foo")
      expect(http_get(1, 'hostheader', 'mypath', timeout_sec=20)).to eq "foo"
    end
  end
end
